---
layout: post
title: '[USACO] Sorting a Three-Valued Sequence'
description: ''
category: USACO
tags: USACO
---



题目描述

给定一个序列（共N个元素），序列中的每个元素来自集合{1, 2, 3}。将这个序列的元素两两交换，将序列变换为非降序排列的序列。求最小的交换次数。

题目分析

题目来源**IOI96**。

自己没有好的思路，我是看题解做的，囧。

一开始想到的是通过BFS遍历所有序列两两交换的结果，然后check结果是否是非降序。不过这个复杂度有些高。写了一半放弃了。

后来想是不是可以通过归并排序来处理（但没有论证过）。写了下归并排序之后，发现结果不对，作罢了。

网上看了题解，发现自己没有充分理解考虑过“每个元素来自于集合{1, 2, 3}”。每个元素的就在1、2、3中换来换去，这显然是个线索！！自己居然忽略了。上面考虑的那两个方法对于任意范围的元素都适合，显然不符合IOI的出题思路。

序列的每个位置无非是1、2、3，排序前和排序后，如果对应位置上的元素不变，直观上后续也无需进行交换。因此我们交换那些对应位置上排序前后变化的元素即可。因此是一个贪心算法。

这里我们证明一下如下论断：

> 如果排序前后位置i上的元素相同，则将序列进行交换的整个过程中，无需动用位置i上元素参与交换过程。

```mathematica
证：
1. 假设序列为a[N], 排序后的b[N], a[k] == b[k], k属于[0, N)
2. 如果序列a和序列b一致，则得证；
3. 如果序列a和序列b不一致，则至少存在i、j, a[i] != b[i], a[j] != b[j], a[j] == b[i] , (i != j, i,j属于[0, N))
4. 如果a[i] == b[j], 则交换a[i], a[j]，即得证；
5. 如果a[i] != b[j], 则a[i]
```



$$
O(1/3)
$$

\\(x^{y^z}=(1+e^x)^{-2xy^w}\\)

$x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}$

$\sideset{^1_2}{^3_4}\bigotimes$
